<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Dimitris Glezos' Personal website</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="imagetoolbar" content="no">
        <meta http-equiv="pragma" content="cache">
        <meta http-equiv="cache-control" content="cache">
        <meta http-equiv="vary" content="content-language">
        <meta http-equiv="Cache-control" content="max-age=2592000, public">
        <meta http-equiv="content-style-type" content="text/css">
        <link rel="stylesheet" type="text/css" href="http://dimitris.glezos.com/theme/css/screen.css">
        <link rel="stylesheet" type="text/css" href="http://dimitris.glezos.com/theme/css/highlight.css">
        <link rel="stylesheet" type="text/css" href="http://dimitris.glezos.com/theme/css/custom.css">
        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
        <link rel="publisher" href="">
        <link rel="apple-touch-startup-image" href="http://dimitris.glezos.com/theme/images/logo.png">
        <link type="text/plain" rel="socialmedia" href="http://dimitris.glezos.com/socialmedia.txt">
        <link rel="dns-prefetch" href="http://dimitris.glezos.com"/>
        <link rel="dns-prefetch" href="//www.gstatic.com"/>
        <link rel="dns-prefetch" href="//fonts.gstatic.com"/>
        <link rel="dns-prefetch" href="//fonts.googleapis.com"/>
        <link rel="dns-prefetch" href="//accounts.google.com"/>
        <link rel="dns-prefetch" href="//ssl.google-analytics.com"/>
        <link rel="dns-prefetch" href="//www.google-analytics.com"/>
        <link rel="dns-prefetch" href="//googleads.g.doubleclick.net"/>
        <link rel="dns-prefetch" href="//pagead2.googlesyndication.com"/>
        <link rel="dns-prefetch" href="//twemoji.maxcdn.com"/>
        <link rel="dns-prefetch" href="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"/>
        <link rel="dns-prefetch" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400"/>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
        <meta name="apple-mobile-web-app-capable" content="yes"/>
        <meta name="application-name" content="Dimitris Glezos' Personal website"/>
        <meta name="msapplication-starturl" content="http:http://dimitris.glezos.com"/>
        <meta name="msapplication-tooltip" content=""/>
        <meta name="msapplication-window" content="width=1024;height=768"/>
        <meta name="msapplication-task" content="name=Dimitris Glezos' Personal website;action-uri=http:http://dimitris.glezos.com;icon-uri=http://dimitris.glezos.com/theme/images/favicon.ico"/>
        <meta name="msapplication-TileImage" content="http://dimitris.glezos.com/theme/images/apple-touch-icon-144x144.png"/>
        <meta name="msapplication-TileColor" content="#1F1F21"/>
        <meta name="application-name" content="Dimitris Glezos' Personal website">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="google-site-verification" content="">
        <meta name="alexaVerifyID" content=""/>
        <meta name="wot-verification" content=""/>
        <meta name="msvalidate.01" content="" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="medium" content="mult">
        <meta name="adblock" content="disable">
        <meta name="rating" content="General">
        <meta name="resource-type" content="document">
        <meta name="revisit-after" content="1 days">
        <meta name="revisit" content="1">
        <meta name="robots" content="index,follow">
        <meta name="no-email-collection" content="http://www.unspam.com/noemailcollection/">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@">
        <meta property="og:site_name" content="Dimitris Glezos' Personal website">
        <meta property="og:locale" content="en">
        <link rel="canonical" href="http://dimitris.glezos.com/2011-02-19-tests-browser.html">
        <meta property="og:type" content="article">
        <meta property="og:title" content="Rendering Django tests in your web browser">
        <meta property="og:url" content="2011-02-19-tests-browser.html">
        <meta property="og:description" content="There are a number of levels you can test your Django project. You can test any Python method, your models, your views and even your templates. In the latter case, you&#39;re actually testing the rendered response of a view with a specific context. Most of the times, this result ...">
        <meta property="article:published_time" content="Saturday, February 19, 2011">
        <meta name="twitter:title" content="Rendering Django tests in your web browser">
        <meta name="twitter:description" content="There are a number of levels you can test your Django project. You can test any Python method, your models, your views and even your templates. In the latter case, you&#39;re actually testing the rendered response of a view with a specific context. Most of the times, this result ...">
        <meta name="description" content="There are a number of levels you can test your Django project. You can test any Python method, your models, your views and even your templates. In the latter case, you&#39;re actually testing the rendered response of a view with a specific context. Most of the times, this result ...">
        <meta name="twitter:creator" content="@">
        <meta property="og:image" content="http://dimitris.glezos.com/theme/images/logo.png">
        <meta name="twitter:image" content="http://dimitris.glezos.com/theme/images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="300">
        <meta property="og:image:height" content="300">
        <meta property="article:section" content="text">
        <meta property="article:author" content="glezos-blog">
        <script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', '', 'auto');ga('send', 'pageview');var _qevents = _qevents || [];setTimeout(function() { window.onscroll = function() { window.onscroll = null;
        ga('send','event','Ajuste de Tasa de Rebote','Scroll despues de 5 segundos');}}, 5000);</script>
        <script src="//twemoji.maxcdn.com/twemoji.min.js"></script>
    </head>
    <body class="post-template nav-closed" itemscope itemtype="http://schema.org/WebPage">
        <meta itemprop="name" content="Dimitris Glezos' Personal website">
        <meta itemprop="url" content="http://dimitris.glezos.com">
        <meta itemprop="headline" content="Dimitris Glezos' Personal website || ">
        <meta itemprop="description about" content="">
        <meta itemprop="keywords" content="">
        <meta itemprop="inLanguage" content="en">
<nav class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul role="menubar">
        <li class="" role="presentation"><a  href="http://dimitris.glezos.com/index.html" title="Dimitris Glezos' Personal website" itemprop="name" itemprop="significantLink">Home</a></li>
            <li role="presentation"><a  href="http://www.transifex.com/" title="Transifex" itemprop="name" itemprop="significantLink">Transifex</a></li>
            <li role="presentation"><a  href="old" title="My really old website" itemprop="name" itemprop="significantLink">My really old website</a></li>
            <li class="" role="presentation"><a  href="http://dimitris.glezos.com/archives.html" title="Dimitris Glezos' Personal website | Archives" itemprop="name" itemprop="significantLink">Archives</a></li>
    </ul>
</nav>
<span class="nav-cover"></span>        <div class="site-wrapper">
            <header class="main-header post-head" style="background-image: url('http://dimitris.glezos.com/');" itemscope itemtype="http://schema.org/WPHeader">
                <div class="vertical">
                    <div class="main-header-content inner">
                        <h1 class="page-title" itemprop="headline">Rendering Django tests in your web browser</h1>
                        <section class="post-meta">
                            <time class="post-date" itemprop="datePublished" datetime="2011YYY-05M-%DD">Saturday, February 19, 2011</time>
                            on                         </section>
                    </div>
                </div>
                <nav class="main-nav overlay clearfix">
                    <a class="menu-button" href="#">
                        <span class="burger">&#9776;</span>
                        <span class="word">Menu</span>
                    </a>
                </nav>
                <div class="vertical">
                    <div class="main-header-content inner">
                    </div>
                </div>
            </header>
<main id="content" class="content" role="main">
    <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
<!--        <header class="post-header">
            <h1 class="post-title" itemprop="headline">Rendering Django tests in your web browser</h1>
            <section class="post-meta">
                <time class="post-date" itemprop="datePublished" datetime="2011YYY-05M-%DD">Saturday, February 19, 2011</time>
                on             </section>
        </header>-->
        <section class="post-content">
            <p>There are a number of levels you can test your Django project. You can test any Python method, your models, your views and even your templates. In the latter case, you're actually testing the rendered response of a view with a specific context. Most of the times, this result is HTML.</p>
<p>When I write my assertion, I often need to query for a particular string in the response's content. I end up <a href="http://miniblog.glezos.com/post/401011795/django-ipython">opening ipython</a>, print the result and try to find something in that mess.</p>
<p>This takes a lot of time, because the command-line window isn't the best HTML renderer in the world. Here's a simple method to take the response content and render it in a browser:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">response_in_browser</span><span class="p">(</span><span class="n">resp</span><span class="p">,</span> <span class="n">halt</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Open a browser and render the response&#39;s content.&quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">tempfile</span><span class="o">,</span> <span class="nn">webbrowser</span><span class="o">,</span> <span class="nn">time</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">()</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">halt</span><span class="p">:</span>
            <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Press a key to continue with your tests...&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Give the browser a chance to open the file</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>And just call it from inside any test of yours:</p>
<div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;myUrlName&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span>
<span class="kn">from</span> <span class="nn">txcommon.tests.utils</span> <span class="kn">import</span> <span class="n">response_in_browser</span>
<span class="n">response_in_browser</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>


<p>Your browser will open for you:</p>
<p><img alt="" src="http://media.tumblr.com/tumblr_lgvubuaB0s1qati3p.png" /></p>
<p>One of the first issues you might face is seeing a style-less page. This
happens becuase the test server isn't really a web server, and you're probably
serving static files from something relative such as <code>'/site_media'</code>. The
solution is simple: Run a separate Django server and tweak your
development-only static URL to something like:</p>
<div class="highlight"><pre><span></span>STATIC_URL = &#39;http://localhost:8000/site_media/
</pre></div>


<p>This will trick the temporary window to show the test's HTML with the static files served from the server. Voilà:</p>
<p><img alt="" src="http://media.tumblr.com/tumblr_lgvuc5Rq8Z1qati3p.png" /></p>
<p>You can then use your browser's browser's super tools such as 'View Source' and 'Inspect Element'.</p>
<p><img alt="" src="http://media.tumblr.com/tumblr_lgvuk3DBKi1qati3p.png" /></p>
            <br/>
        </section>
        <footer class="post-footer">
            <figure class="author-image">
                <a class="img" href="author/glezos-blog.html" style="background-image: url('/theme/glezos_portrait_square.jpg')"><span class="hidden">glezos-blog's Picture</span></a>
            </figure>
            <section class="author">
                <h4>
                    <a href="author/glezos-blog.html">glezos-blog</a>
                </h4>
                <p></p>
                <div class="author-meta">
                    <span class="author-location icon-location"></span>
                </div>
            </section>
            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=Rendering%20Django%20tests%20in%20your%20web%20browser%20via%20%40&amp;url=http://dimitris.glezos.com/2011-02-19-tests-browser.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://dimitris.glezos.com/2011-02-19-tests-browser.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://dimitris.glezos.com/2011-02-19-tests-browser.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
        </footer>
    </article>
</main>
<aside class="read-next">
</aside>            <footer class="site-footer clearfix" role="contentinfo" itemscope itemtype="http://schema.org/WPFooter">
            <!--
                <section class="copyright">
                    <a itemprop="url" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
                        CC Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
                </section>
            -->
                <section class="poweredby">
                    Proudly published with
                    <a itemprop="url" href="https://getpelican.org" target="_blank">Pelican</a>
                </section>
            </footer>
        </div>
    <script type="text/javascript" src="http://dimitris.glezos.com/theme/js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="http://dimitris.glezos.com/theme/js/jquery.fitvids.min.js"></script>
    <script type="text/javascript" src="http://dimitris.glezos.com/theme/js/index.min.js"></script>
    <script>twemoji.parse(document, {"size":16});</script>
    </body>
</html>